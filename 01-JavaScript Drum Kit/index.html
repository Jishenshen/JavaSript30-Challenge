<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>01-DrumKit</title>
    <link href="style.css" rel="stylesheet" />
  </head>
  <body>
    <div class="wrapper">
      <div class="container">
        <li data-key="65" , class="each-item">
          <p class="title">A</p>
          <p class="description">CLAP</p>
        </li>
        <li data-key="83" class="each-item">
          <p class="title">S</p>
          <p class="description">HIHAT</p>
        </li>
        <li data-key="68" class="each-item">
          <p class="title">D</p>
          <p class="description">KICK</p>
        </li>
        <li data-key="70" class="each-item">
          <p class="title">F</p>
          <p class="description">OPENHAT</p>
        </li>
        <li data-key="71" class="each-item">
          <p class="title">G</p>
          <p class="description">BOOM</p>
        </li>
        <li data-key="72" class="each-item">
          <p class="title">H</p>
          <p class="description">RIDE</p>
        </li>
        <li data-key="74" class="each-item">
          <p class="title">J</p>
          <p class="description">SNARE</p>
        </li>
        <li data-key="75" class="each-item">
          <p class="title">K</p>
          <p class="description">TOM</p>
        </li>
        <li data-key="76" class="each-item">
          <p class="title">L</p>
          <p class="description">TINK</p>
        </li>
      </div>
    </div>
    <audio data-key="65" src="./sounds/clap.wav"></audio>
    <audio data-key="83" src="./sounds/hihat.wav"></audio>
    <audio data-key="68" src="./sounds/kick.wav "></audio>
    <audio data-key="70" src="./sounds/openhat.wav"></audio>
    <audio data-key="71" src="./sounds/boom.wav"></audio>
    <audio data-key="72" src="./sounds/ride.wav"></audio>
    <audio data-key="74" src="./sounds/snare.wav"></audio>
    <audio data-key="75" src="./sounds/tom.wav"></audio>
    <audio data-key="76" src="./sounds/tink.wav"></audio>

    <script>
      function removeTransition (e) {
        if (e.propertyName !== 'transform') return
        e.target.classList.remove('playing')
      }

      function playSound (e) {
        let audio = document.querySelector(`audio[data-key="${e.keyCode}"]`)
        let key = document.querySelector(`li[data-key="${e.keyCode}"]`)

        if (!audio) return //stop the function from running all together

        key.classList.add('playing')
        audio.currentTime = 0
        audio.play()
      }

      const keys = Array.from(document.querySelectorAll('.each-item'))

      keys.forEach(key =>
        key.addEventListener('transitionend', removeTransition)
      )

      window.addEventListener('keydown', playSound)
    </script>
  </body>
</html>
